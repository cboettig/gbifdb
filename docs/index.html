<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Local Database Interface to GBIF • gbifdb</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Local Database Interface to GBIF">
<meta property="og:description" content="A high performance interface to the Global Biodiversity
  Information Facility, GBIF.  In contrast to rgbif, which can
  access small subsets of GBIF data through web-based queries to
  a central server, gbifdb provides enhanced performance for R users
  performing large-scale analyses on servers and cloud computing
  providers, providing full support for arbitrary SQL or dplyr
  operations on the complete GBIF data tables (now over 1 billion
  records, and over a terabyte in size). gbifdb accesses a copy
  of the GBIF data in parquet format, which is already readily
  available in commercial computing clouds such as the Amazon Open
  Data portal and the Microsoft Planetary Computer, or can be 
  accessed directly without downloading, or downloaded
  to any server with suitable bandwidth and storage space.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gbifdb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/intro.html">Intro to gbifdb</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/cboettig/gbifdb/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="gbifdb">gbifdb<a class="anchor" aria-label="anchor" href="#gbifdb"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <code>gbifdb</code> is to provide a relational database
interface to a <code>parquet</code> based serializations of
<code>gbif</code>’s AWS snapshots of its public data [^1]. [^1]: all CC0
and CC-BY licensed data in GBIF that have coordinates which passed
automated quality checks, [see GBIF docs]<a href="https://github.com/gbif/occurrence/blob/master/aws-public-data.md" class="external-link uri">https://github.com/gbif/occurrence/blob/master/aws-public-data.md</a>)
Instead of requiring custom functions for filtering and selecting data
from the central GBIF server (as in <code>rgbif</code>),
<code>gbifdb</code> users can take advantage of the full array of
<code>dplyr</code> and <code>tidyr</code> functions which can be
automatically translated to SQL by <code>dbplyr</code>. Users already
familiar with SQL can construct SQL queries directly with
<code>DBI</code> instead. <code>gbifdb</code> sends these queries to <a href="https://duckdb.org" class="external-link"><code>duckdb</code></a>, a high-performance,
columnar-oriented database engine which runs entirely inside the client,
(unlike server-client databases such as MySQL or Postgres, no additional
setup is needed outside of installing <code>gbifdb</code>.)
<code>duckdb</code> is able to execute these SQL queries directly
on-disk against the Parquet data files, side-stepping limitations of
available RAM or the need to import the data. It’s highly optimized
implementation can be faster even than in-memory operations in
<code>dplyr</code>. <code>duckdb</code> supports the full set of SQL
instructions, including windowed operations like
<code>group_by</code>+<code>summarise</code> as well as table joins.</p>
<p><code>gbifdb</code> has two mechanisms for providing database
connections: one which the Parquet snapshot of GBIF must first be
downloaded locally, and a second where the GBIF parquet snapshot can be
accessed directly from an Amazon Public Data Registry S3 bucket without
downloading a copy. The latter approach will be faster for one-off
operations and is also suitable when using a cloud-based computing
provider in the same region.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<!--

You can install the released version of `gbifdb` from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("gbifdb")
```

-->
<p>And the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"cboettig/gbifdb"</span><span class="op">)</span></code></pre></div>
<p><code>gbifdb</code> has few dependencies: <code>arrow</code>,
<code>duckdb</code> and <code>DBI</code> are required.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cboettig/gbifdb" class="external-link">gbifdb</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>  <span class="co"># optional, for dplyr-based operations</span></code></pre></div>
<div class="section level3">
<h3 id="remote-data-access">Remote data access<a class="anchor" aria-label="anchor" href="#remote-data-access"></a>
</h3>
<p>To begin working with GBIF data directly without downloading the data
first, simply establish a remote connection using
<code><a href="reference/gbif_remote.html">gbif_remote()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gbif</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gbif_remote.html">gbif_remote</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>We can now perform most <code>dplyr</code> operations:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gbif</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phylum</span> <span class="op">==</span> <span class="st">"Chordata"</span>, <span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">class</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 461 × 3</span>
<span class="co">#&gt;    class     year        n</span>
<span class="co">#&gt;    &lt;chr&gt;    &lt;int&gt;    &lt;int&gt;</span>
<span class="co">#&gt;  1 Mammalia  2019   357036</span>
<span class="co">#&gt;  2 Amphibia  2016    54300</span>
<span class="co">#&gt;  3 Aves      1993  2909760</span>
<span class="co">#&gt;  4 Aves      2016 86862292</span>
<span class="co">#&gt;  5 Aves      2001  6321959</span>
<span class="co">#&gt;  6 Aves      1994  3110959</span>
<span class="co">#&gt;  7 Aves      1997  3862252</span>
<span class="co">#&gt;  8 Aves      2011 30081466</span>
<span class="co">#&gt;  9 Mammalia  2014   605929</span>
<span class="co">#&gt; 10 Reptilia  1999    37241</span>
<span class="co">#&gt; # … with 451 more rows</span></code></pre></div>
<p>By default, this relies on an <code>arrow</code> connection, which
currently lacks support for some more complex windowed operations in
<code>dplyr</code>. A user can specify the option
<code>to_duckdb = TRUE</code> in <code><a href="reference/gbif_remote.html">gbif_remote()</a></code> (or simply
pass the connection to <code><a href="https://arrow.apache.org/docs/r/reference/to_duckdb.html" class="external-link">arrow::to_duckdb()</a></code>) to create a
<code>duckdb</code> connection. This is slightly slower at this time.
Keep in mind that as with any database connection, to use
non-<code>dplyr</code> functions the user will generally need to call
<code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">dplyr::collect()</a></code>, which pulls the data into working
memory.<br>
Be sure to subset the data appropriately first (e.g. with
<code>filter</code>, <code>summarise</code>, etc), as attempting to
<code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> a large table will probably exceed available RAM
and crash your R session!</p>
<p>When using a <code><a href="reference/gbif_remote.html">gbif_remote()</a></code> connection, all I/O
operations will be conducted over the network storage instead of your
local disk, without downloading the full dataset first. Consequently,
this mechanism will perform best on platforms with faster network
connections. These operations will be considerably slower than they
would be if you download the entire dataset first (see below, unless you
are on an AWS cloud instance in the same region as the remote host), but
this does avoid the download step all-together, which may be necessary
if you do not have 100+ GB free storage space or the time to download
the whole dataset first (e.g. for one-off queries).</p>
</div>
<div class="section level3">
<h3 id="local-data">Local data<a class="anchor" aria-label="anchor" href="#local-data"></a>
</h3>
<p>For extended analysis of GBIF, users may prefer to download the
entire GBIF parquet data first. This requires over 100 GB free disk
space, and will be a time-consuming process the first time. However,
once downloaded, future queries will run much much faster, particularly
if you are network-limited. Users can download the current release of
GBIF to local storage like so:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/gbif_download.html">gbif_download</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>By default, this will download to the dir given by
<code><a href="reference/gbif_dir.html">gbif_dir()</a></code>.<br>
An alternative directory can be provided by setting the environmental
variable, <code>GBIF_HOME</code>, or providing the path to the directory
containing the parquet files directly.</p>
<p>Once you have downloaded the parquet-formatted GBIF data,
<code><a href="reference/gbif_local.html">gbif_local()</a></code> will establish a connection to these local
parquet files.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gbif</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/gbif_local.html">gbif_local</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">gbif</span>
<span class="co">#&gt; # Source:   lazy query [?? x 48]</span>
<span class="co">#&gt; # Database: duckdb_connection</span>
<span class="co">#&gt;        gbifid datasetkey    occurrenceid kingdom phylum class order family genus</span>
<span class="co">#&gt;         &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;</span>
<span class="co">#&gt;  1 1054620404 b42a2e9a-fba… 5dvj8642-38… Animal… Arthr… Inse… Cole… Carab… Amara</span>
<span class="co">#&gt;  2 1054619415 b42a2e9a-fba… 5dvj8642-28… Animal… Arthr… Inse… Cole… Carab… Pter…</span>
<span class="co">#&gt;  3 1054621736 b42a2e9a-fba… 5dvj8642-51… Animal… Arthr… Inse… Cole… Carab… Cara…</span>
<span class="co">#&gt;  4 1054621735 b42a2e9a-fba… 5dvj8642-51… Animal… Arthr… Inse… Cole… Carab… Cara…</span>
<span class="co">#&gt;  5 1054620405 b42a2e9a-fba… 5dvj8642-38… Animal… Arthr… Inse… Cole… Carab… Amara</span>
<span class="co">#&gt;  6 1054619416 b42a2e9a-fba… 5dvj8642-28… Animal… Arthr… Inse… Cole… Carab… Pter…</span>
<span class="co">#&gt;  7 1054621734 b42a2e9a-fba… 5dvj8642-51… Animal… Arthr… Inse… Cole… Carab… Cara…</span>
<span class="co">#&gt;  8 1054620402 b42a2e9a-fba… 5dvj8642-38… Animal… Arthr… Inse… Cole… Carab… Amara</span>
<span class="co">#&gt;  9 1054619417 b42a2e9a-fba… 5dvj8642-28… Animal… Arthr… Inse… Cole… Carab… Pter…</span>
<span class="co">#&gt; 10 1054620403 b42a2e9a-fba… 5dvj8642-38… Animal… Arthr… Inse… Cole… Carab… Amara</span>
<span class="co">#&gt; # … with more rows, and 39 more variables: species &lt;chr&gt;,</span>
<span class="co">#&gt; #   infraspecificepithet &lt;chr&gt;, taxonrank &lt;chr&gt;, scientificname &lt;chr&gt;,</span>
<span class="co">#&gt; #   verbatimscientificname &lt;chr&gt;, verbatimscientificnameauthorship &lt;chr&gt;,</span>
<span class="co">#&gt; #   countrycode &lt;chr&gt;, locality &lt;chr&gt;, stateprovince &lt;chr&gt;,</span>
<span class="co">#&gt; #   occurrencestatus &lt;chr&gt;, individualcount &lt;int&gt;, publishingorgkey &lt;chr&gt;,</span>
<span class="co">#&gt; #   decimallatitude &lt;dbl&gt;, decimallongitude &lt;dbl&gt;,</span>
<span class="co">#&gt; #   coordinateuncertaintyinmeters &lt;dbl&gt;, coordinateprecision &lt;dbl&gt;, …</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">gbif</span><span class="op">)</span>
<span class="co">#&gt;  [1] "gbifid"                           "datasetkey"                      </span>
<span class="co">#&gt;  [3] "occurrenceid"                     "kingdom"                         </span>
<span class="co">#&gt;  [5] "phylum"                           "class"                           </span>
<span class="co">#&gt;  [7] "order"                            "family"                          </span>
<span class="co">#&gt;  [9] "genus"                            "species"                         </span>
<span class="co">#&gt; [11] "infraspecificepithet"             "taxonrank"                       </span>
<span class="co">#&gt; [13] "scientificname"                   "verbatimscientificname"          </span>
<span class="co">#&gt; [15] "verbatimscientificnameauthorship" "countrycode"                     </span>
<span class="co">#&gt; [17] "locality"                         "stateprovince"                   </span>
<span class="co">#&gt; [19] "occurrencestatus"                 "individualcount"                 </span>
<span class="co">#&gt; [21] "publishingorgkey"                 "decimallatitude"                 </span>
<span class="co">#&gt; [23] "decimallongitude"                 "coordinateuncertaintyinmeters"   </span>
<span class="co">#&gt; [25] "coordinateprecision"              "elevation"                       </span>
<span class="co">#&gt; [27] "elevationaccuracy"                "depth"                           </span>
<span class="co">#&gt; [29] "depthaccuracy"                    "eventdate"                       </span>
<span class="co">#&gt; [31] "day"                              "month"                           </span>
<span class="co">#&gt; [33] "year"                             "taxonkey"                        </span>
<span class="co">#&gt; [35] "specieskey"                       "basisofrecord"                   </span>
<span class="co">#&gt; [37] "institutioncode"                  "collectioncode"                  </span>
<span class="co">#&gt; [39] "catalognumber"                    "recordnumber"                    </span>
<span class="co">#&gt; [41] "identifiedby"                     "dateidentified"                  </span>
<span class="co">#&gt; [43] "license"                          "rightsholder"                    </span>
<span class="co">#&gt; [45] "recordedby"                       "typestatus"                      </span>
<span class="co">#&gt; [47] "establishmentmeans"               "lastinterpreted"</span></code></pre></div>
<p>Now, we can use <code>dplyr</code> to perform standard queries:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">growth</span> <span class="op">&lt;-</span> <span class="va">gbif</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">phylum</span> <span class="op">==</span> <span class="st">"Chordata"</span>, <span class="va">year</span> <span class="op">&gt;</span> <span class="fl">1990</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">class</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>
<span class="va">growth</span>
<span class="co">#&gt; # Source:     lazy query [?? x 3]</span>
<span class="co">#&gt; # Database:   duckdb_connection</span>
<span class="co">#&gt; # Groups:     class</span>
<span class="co">#&gt; # Ordered by: year</span>
<span class="co">#&gt;    class               year       n</span>
<span class="co">#&gt;    &lt;chr&gt;              &lt;int&gt;   &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Aves                1991 3183184</span>
<span class="co">#&gt;  2 Amphibia            1991   18443</span>
<span class="co">#&gt;  3 Actinopterygii      1991  363791</span>
<span class="co">#&gt;  4 Mammalia            1991  100931</span>
<span class="co">#&gt;  5 Reptilia            1991   29806</span>
<span class="co">#&gt;  6 Ascidiacea          1991    1602</span>
<span class="co">#&gt;  7 Elasmobranchii      1991   17521</span>
<span class="co">#&gt;  8 Cephalaspidomorphi  1991    1152</span>
<span class="co">#&gt;  9 Holocephali         1991    1048</span>
<span class="co">#&gt; 10 Leptocardii         1991      36</span>
<span class="co">#&gt; # … with more rows</span></code></pre></div>
<p>Recall that when database connections in <code>dplyr</code>, the data
remains in the database (i.e. on disk, not in working RAM).<br>
This is fine for any further operations using
<code>dplyr</code>/<code>tidyr</code> functions which can be translated
into SQL.<br>
Using such functions we can usually reduce our resulting table to
something much smaller, which can then be pulled into memory in R for
further analysis using <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org" class="external-link">forcats</a></span><span class="op">)</span>
<span class="co"># GBIF: the global bird information facility?</span>
<span class="va">growth</span> <span class="op"><a href="https://forcats.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
 <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://forcats.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_lump.html" class="external-link">fct_lump_n</a></span><span class="op">(</span><span class="va">class</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://forcats.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">n</span>, fill<span class="op">=</span><span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"GBIF observations of vertebrates by class"</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="performance-notes">Performance notes<a class="anchor" aria-label="anchor" href="#performance-notes"></a>
</h2>
<p>Because <code>parquet</code> is a columnar-oriented dataset,
performance can be improved by including a <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select()</a></code> call at
the end of a dplyr function chain to only return the columns you
actually need. This can be particularly helpful on remote connections
using <code><a href="reference/gbif_remote.html">gbif_remote()</a></code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cboettig/gbifdb/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cboettig/gbifdb" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing gbifdb</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Carl Boettiger <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-1642-628X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cboettig/gbifdb/actions" class="external-link"><img src="https://github.com/cboettig/gbifdb/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Carl Boettiger.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a>
2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
